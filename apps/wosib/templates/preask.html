<!DOCTYPE html>
<html lang='en'>
    <head>
        <script type="text/javascript" 
                src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript">
            if (typeof jQuery == 'undefined'){
                document.write(unescape("%3Cscript src='/static/js/jquery.min.js' type='text/javascript' charset='utf-8' %3E%3C/script%3E"));
            }
        </script>
        <link rel="stylesheet" href="/static/sibt/css/shopify.css" type="text/css" />
        <style type="text/css">
            #cart_items_display {
                display: block;
                margin: 0 auto;
                padding: 0;
            }
            #cart_items_display li {
                display: inline-block;
                border: 1px silver solid;
                border-radius: 5px;
                margin: 10px 5px;
                padding: 10px;
                width: 200px;
                height: 324px;
                background-color: #fcfcfc;
                vertical-align: bottom;
            }
            #cart_items_display li:hover {
                background-color: #fcfcff;
            }
            #cart_items_display img, #cart_items_display input, #cart_items_display label {
                clear:both;
                display:block;
                margin: 0 auto;
            }
            #cart_items_display img {
                max-height: 200px;
            }
        </style>
    </head>
    <body>
        <div class="wrapper">
            <div id="splash">
                <div class="title_bar">
                    <img width=79 height=50 src="/static/imgs/sibt_logo_79x50.png" />
                    <div>Select items to display in your survey.</div>
                </div>
                <form method="POST">
                    <ul id="cart_items_display">
                        <!-- JS -->
                    </ul>
                </form>
            </div>
        </div>
        <script type="text/javascript">
            // controller guarantees there to be 1+ variants
            var _willet_cart_variants = [ {% for variant in variants %}
                {   "id": "{{variant.id}}",
                    "title": "{{variant.title}}",
                     // deprecated... try /cart.js.
                    "image": "{{variant.image}}",
                    "variant_id": "{{variant.variant_id}}",
                },
            {% endfor %} ];
            
            for (x in _willet_cart_variants) {
                // add products onto page.
                $('#cart_items_display').append(
                    '<li>' + 
                        '<img class="variant_image" src="' + _willet_cart_variants[x].image + '" />' +
                        '<label for="item' + _willet_cart_variants[x].variant_id + '">' +
                            _willet_cart_variants[x].title + 
                        '</label>' + 
                        '<input name="item' + _willet_cart_variants[x].variant_id + '" ' + 
                               'id="item' + _willet_cart_variants[x].variant_id + '" ' + 
                               'class="variant_select" type="checkbox" checked="checked" />' +
                    '</li>'
                );
                
                // add product selection events onto checkbox.
                $('.variant_select').click(function () {
                    if (this.checked) { // fade in
                        $(this).parent().fadeTo(400, 1.0);
                    } else { // fade out
                        $(this).parent().fadeTo(400, 0.3);
                    }
                });
            }
        </script>
    </body>
</html>
